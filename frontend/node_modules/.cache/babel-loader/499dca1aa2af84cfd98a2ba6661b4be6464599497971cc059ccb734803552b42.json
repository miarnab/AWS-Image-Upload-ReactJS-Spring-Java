{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mitra\\\\Desktop\\\\AWS-Image-Upload-ReactJS-Spring-Java\\\\frontend\\\\src\\\\components\\\\ImageUpload.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ImageUpload = () => {\n  _s();\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [profiles, setProfiles] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  // Fetch profiles on component mount\n  React.useEffect(() => {\n    fetchProfiles();\n  }, []);\n  const fetchProfiles = async () => {\n    try {\n      const response = await axios.get('/api/v1/user-profile');\n      setProfiles(response.data);\n    } catch (err) {\n      setError('Failed to fetch profiles');\n      console.error('Error fetching profiles:', err);\n    }\n  };\n  const handleFileSelect = event => {\n    var _event$target$files;\n    const file = (_event$target$files = event.target.files) === null || _event$target$files === void 0 ? void 0 : _event$target$files[0];\n    if (file) {\n      setSelectedFile(file);\n      setError('');\n    }\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    if (!selectedFile) {\n      setError('Please select a file');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    try {\n      var _profiles$;\n      const formData = new FormData();\n      formData.append('file', selectedFile);\n\n      // Assuming we're uploading to the first user's profile\n      // In a real app, you'd want to specify the user\n      const userProfileId = (_profiles$ = profiles[0]) === null || _profiles$ === void 0 ? void 0 : _profiles$.userProfileId;\n      if (!userProfileId) {\n        throw new Error('No user profile available');\n      }\n      await axios.post(`/api/v1/user-profile/${userProfileId}/image/upload`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n\n      // Refresh profiles to show new image\n      await fetchProfiles();\n      setSelectedFile(null);\n\n      // Reset file input\n      const fileInput = document.querySelector('input[type=\"file\"]');\n      if (fileInput) fileInput.value = '';\n    } catch (err) {\n      setError('Failed to upload image');\n      console.error('Error uploading file:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px',\n      maxWidth: '600px',\n      margin: '0 auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Profile Image Upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          onChange: handleFileSelect,\n          disabled: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: !selectedFile || loading,\n        style: {\n          padding: '8px 16px',\n          backgroundColor: !selectedFile || loading ? '#ccc' : '#0066cc',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          cursor: !selectedFile || loading ? 'not-allowed' : 'pointer'\n        },\n        children: loading ? 'Uploading...' : 'Upload'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'red',\n          marginTop: '10px'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '40px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"User Profiles\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), profiles.map(profile => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px',\n          padding: '10px',\n          border: '1px solid #ddd',\n          borderRadius: '4px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Username:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 16\n          }, this), \" \", profile.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this), profile.userProfileImageLink && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: profile.userProfileImageLink,\n          alt: `${profile.username}'s profile`,\n          style: {\n            maxWidth: '200px',\n            marginTop: '10px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 15\n        }, this)]\n      }, profile.userProfileId, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n};\n_s(ImageUpload, \"KXgsE66fRFMBfR/sDPkzCI5510o=\");\n_c = ImageUpload;\nvar _c;\n$RefreshReg$(_c, \"ImageUpload\");","map":{"version":3,"names":["React","useState","axios","jsxDEV","_jsxDEV","ImageUpload","_s","selectedFile","setSelectedFile","profiles","setProfiles","loading","setLoading","error","setError","useEffect","fetchProfiles","response","get","data","err","console","handleFileSelect","event","_event$target$files","file","target","files","handleSubmit","preventDefault","_profiles$","formData","FormData","append","userProfileId","Error","post","headers","fileInput","document","querySelector","value","style","padding","maxWidth","margin","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","marginBottom","type","accept","onChange","disabled","backgroundColor","color","border","borderRadius","cursor","marginTop","map","profile","username","userProfileImageLink","src","alt","_c","$RefreshReg$"],"sources":["C:/Users/mitra/Desktop/AWS-Image-Upload-ReactJS-Spring-Java/frontend/src/components/ImageUpload.tsx"],"sourcesContent":["import React, { useState, ChangeEvent, FormEvent } from 'react';\r\nimport axios from 'axios';\r\n\r\ninterface UserProfile {\r\n  userProfileId: string;\r\n  username: string;\r\n  userProfileImageLink: string;\r\n}\r\n\r\nexport const ImageUpload: React.FC = () => {\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n  const [profiles, setProfiles] = useState<UserProfile[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string>('');\r\n\r\n  // Fetch profiles on component mount\r\n  React.useEffect(() => {\r\n    fetchProfiles();\r\n  }, []);\r\n\r\n  const fetchProfiles = async () => {\r\n    try {\r\n      const response = await axios.get<UserProfile[]>('/api/v1/user-profile');\r\n      setProfiles(response.data);\r\n    } catch (err) {\r\n      setError('Failed to fetch profiles');\r\n      console.error('Error fetching profiles:', err);\r\n    }\r\n  };\r\n\r\n  const handleFileSelect = (event: ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      setSelectedFile(file);\r\n      setError('');\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (event: FormEvent) => {\r\n    event.preventDefault();\r\n    if (!selectedFile) {\r\n      setError('Please select a file');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('file', selectedFile);\r\n\r\n      // Assuming we're uploading to the first user's profile\r\n      // In a real app, you'd want to specify the user\r\n      const userProfileId = profiles[0]?.userProfileId;\r\n      \r\n      if (!userProfileId) {\r\n        throw new Error('No user profile available');\r\n      }\r\n\r\n      await axios.post(\r\n        `/api/v1/user-profile/${userProfileId}/image/upload`,\r\n        formData,\r\n        {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n          },\r\n        }\r\n      );\r\n\r\n      // Refresh profiles to show new image\r\n      await fetchProfiles();\r\n      setSelectedFile(null);\r\n      \r\n      // Reset file input\r\n      const fileInput = document.querySelector('input[type=\"file\"]') as HTMLInputElement;\r\n      if (fileInput) fileInput.value = '';\r\n    } catch (err) {\r\n      setError('Failed to upload image');\r\n      console.error('Error uploading file:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '20px', maxWidth: '600px', margin: '0 auto' }}>\r\n      <h2>Profile Image Upload</h2>\r\n      \r\n      <form onSubmit={handleSubmit}>\r\n        <div style={{ marginBottom: '20px' }}>\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            onChange={handleFileSelect}\r\n            disabled={loading}\r\n          />\r\n        </div>\r\n        \r\n        <button\r\n          type=\"submit\"\r\n          disabled={!selectedFile || loading}\r\n          style={{\r\n            padding: '8px 16px',\r\n            backgroundColor: !selectedFile || loading ? '#ccc' : '#0066cc',\r\n            color: 'white',\r\n            border: 'none',\r\n            borderRadius: '4px',\r\n            cursor: !selectedFile || loading ? 'not-allowed' : 'pointer'\r\n          }}\r\n        >\r\n          {loading ? 'Uploading...' : 'Upload'}\r\n        </button>\r\n\r\n        {error && (\r\n          <p style={{ color: 'red', marginTop: '10px' }}>{error}</p>\r\n        )}\r\n      </form>\r\n\r\n      <div style={{ marginTop: '40px' }}>\r\n        <h3>User Profiles</h3>\r\n        {profiles.map(profile => (\r\n          <div\r\n            key={profile.userProfileId}\r\n            style={{\r\n              marginBottom: '20px',\r\n              padding: '10px',\r\n              border: '1px solid #ddd',\r\n              borderRadius: '4px'\r\n            }}\r\n          >\r\n            <p><strong>Username:</strong> {profile.username}</p>\r\n            {profile.userProfileImageLink && (\r\n              <img\r\n                src={profile.userProfileImageLink}\r\n                alt={`${profile.username}'s profile`}\r\n                style={{\r\n                  maxWidth: '200px',\r\n                  marginTop: '10px'\r\n                }}\r\n              />\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAgC,OAAO;AAC/D,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAQ1B,OAAO,MAAMC,WAAqB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACzC,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGP,QAAQ,CAAc,IAAI,CAAC;EACnE,MAAM,CAACQ,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAgB,EAAE,CAAC;EAC3D,MAAM,CAACU,OAAO,EAAEC,UAAU,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACY,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAS,EAAE,CAAC;;EAE9C;EACAD,KAAK,CAACe,SAAS,CAAC,MAAM;IACpBC,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMA,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChC,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMf,KAAK,CAACgB,GAAG,CAAgB,sBAAsB,CAAC;MACvER,WAAW,CAACO,QAAQ,CAACE,IAAI,CAAC;IAC5B,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZN,QAAQ,CAAC,0BAA0B,CAAC;MACpCO,OAAO,CAACR,KAAK,CAAC,0BAA0B,EAAEO,GAAG,CAAC;IAChD;EACF,CAAC;EAED,MAAME,gBAAgB,GAAIC,KAAoC,IAAK;IAAA,IAAAC,mBAAA;IACjE,MAAMC,IAAI,IAAAD,mBAAA,GAAGD,KAAK,CAACG,MAAM,CAACC,KAAK,cAAAH,mBAAA,uBAAlBA,mBAAA,CAAqB,CAAC,CAAC;IACpC,IAAIC,IAAI,EAAE;MACRjB,eAAe,CAACiB,IAAI,CAAC;MACrBX,QAAQ,CAAC,EAAE,CAAC;IACd;EACF,CAAC;EAED,MAAMc,YAAY,GAAG,MAAOL,KAAgB,IAAK;IAC/CA,KAAK,CAACM,cAAc,CAAC,CAAC;IACtB,IAAI,CAACtB,YAAY,EAAE;MACjBO,QAAQ,CAAC,sBAAsB,CAAC;MAChC;IACF;IAEAF,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,EAAE,CAAC;IAEZ,IAAI;MAAA,IAAAgB,UAAA;MACF,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE1B,YAAY,CAAC;;MAErC;MACA;MACA,MAAM2B,aAAa,IAAAJ,UAAA,GAAGrB,QAAQ,CAAC,CAAC,CAAC,cAAAqB,UAAA,uBAAXA,UAAA,CAAaI,aAAa;MAEhD,IAAI,CAACA,aAAa,EAAE;QAClB,MAAM,IAAIC,KAAK,CAAC,2BAA2B,CAAC;MAC9C;MAEA,MAAMjC,KAAK,CAACkC,IAAI,CACd,wBAAwBF,aAAa,eAAe,EACpDH,QAAQ,EACR;QACEM,OAAO,EAAE;UACP,cAAc,EAAE;QAClB;MACF,CACF,CAAC;;MAED;MACA,MAAMrB,aAAa,CAAC,CAAC;MACrBR,eAAe,CAAC,IAAI,CAAC;;MAErB;MACA,MAAM8B,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,oBAAoB,CAAqB;MAClF,IAAIF,SAAS,EAAEA,SAAS,CAACG,KAAK,GAAG,EAAE;IACrC,CAAC,CAAC,OAAOrB,GAAG,EAAE;MACZN,QAAQ,CAAC,wBAAwB,CAAC;MAClCO,OAAO,CAACR,KAAK,CAAC,uBAAuB,EAAEO,GAAG,CAAC;IAC7C,CAAC,SAAS;MACRR,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,oBACER,OAAA;IAAKsC,KAAK,EAAE;MAAEC,OAAO,EAAE,MAAM;MAAEC,QAAQ,EAAE,OAAO;MAAEC,MAAM,EAAE;IAAS,CAAE;IAAAC,QAAA,gBACnE1C,OAAA;MAAA0C,QAAA,EAAI;IAAoB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAE7B9C,OAAA;MAAM+C,QAAQ,EAAEvB,YAAa;MAAAkB,QAAA,gBAC3B1C,OAAA;QAAKsC,KAAK,EAAE;UAAEU,YAAY,EAAE;QAAO,CAAE;QAAAN,QAAA,eACnC1C,OAAA;UACEiD,IAAI,EAAC,MAAM;UACXC,MAAM,EAAC,SAAS;UAChBC,QAAQ,EAAEjC,gBAAiB;UAC3BkC,QAAQ,EAAE7C;QAAQ;UAAAoC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnB;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eAEN9C,OAAA;QACEiD,IAAI,EAAC,QAAQ;QACbG,QAAQ,EAAE,CAACjD,YAAY,IAAII,OAAQ;QACnC+B,KAAK,EAAE;UACLC,OAAO,EAAE,UAAU;UACnBc,eAAe,EAAE,CAAClD,YAAY,IAAII,OAAO,GAAG,MAAM,GAAG,SAAS;UAC9D+C,KAAK,EAAE,OAAO;UACdC,MAAM,EAAE,MAAM;UACdC,YAAY,EAAE,KAAK;UACnBC,MAAM,EAAE,CAACtD,YAAY,IAAII,OAAO,GAAG,aAAa,GAAG;QACrD,CAAE;QAAAmC,QAAA,EAEDnC,OAAO,GAAG,cAAc,GAAG;MAAQ;QAAAoC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9B,CAAC,EAERrC,KAAK,iBACJT,OAAA;QAAGsC,KAAK,EAAE;UAAEgB,KAAK,EAAE,KAAK;UAAEI,SAAS,EAAE;QAAO,CAAE;QAAAhB,QAAA,EAAEjC;MAAK;QAAAkC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAC1D;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG,CAAC,eAEP9C,OAAA;MAAKsC,KAAK,EAAE;QAAEoB,SAAS,EAAE;MAAO,CAAE;MAAAhB,QAAA,gBAChC1C,OAAA;QAAA0C,QAAA,EAAI;MAAa;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EACrBzC,QAAQ,CAACsD,GAAG,CAACC,OAAO,iBACnB5D,OAAA;QAEEsC,KAAK,EAAE;UACLU,YAAY,EAAE,MAAM;UACpBT,OAAO,EAAE,MAAM;UACfgB,MAAM,EAAE,gBAAgB;UACxBC,YAAY,EAAE;QAChB,CAAE;QAAAd,QAAA,gBAEF1C,OAAA;UAAA0C,QAAA,gBAAG1C,OAAA;YAAA0C,QAAA,EAAQ;UAAS;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,KAAC,EAACc,OAAO,CAACC,QAAQ;QAAA;UAAAlB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EACnDc,OAAO,CAACE,oBAAoB,iBAC3B9D,OAAA;UACE+D,GAAG,EAAEH,OAAO,CAACE,oBAAqB;UAClCE,GAAG,EAAE,GAAGJ,OAAO,CAACC,QAAQ,YAAa;UACrCvB,KAAK,EAAE;YACLE,QAAQ,EAAE,OAAO;YACjBkB,SAAS,EAAE;UACb;QAAE;UAAAf,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACF;MAAA,GAlBIc,OAAO,CAAC9B,aAAa;QAAAa,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAmBvB,CACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC5C,EAAA,CA1IWD,WAAqB;AAAAgE,EAAA,GAArBhE,WAAqB;AAAA,IAAAgE,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}